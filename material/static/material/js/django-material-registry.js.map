{"version":3,"sources":["django-material-registry.js"],"names":["registry","Object","create","CONSOLE_WARN","console","warn","bind","pageLoaded","autoInit","window","addEventListener","onLoad","onBeforeRender","onRequestEnd","initComponents","root","document","allowUnknown","nodes","querySelectorAll","i","node","ctorName","dataset","mdcAutoInit","Error","Ctor","component","attachTo","defineProperty","value","writable","enumerable","configurable","register","componentName","querySelector","length","destroy","event","data","xhr","status","Turbolinks","controller","disable","removeEventListener","mdc","checkbox","MDCCheckbox","dialog","MDCDialog","drawer","MDCPersistentDrawer","MDCTemporaryDrawer","formField","MDCFormField","ripple","MDCRipple","gridList","MDCGridList","iconToggle","MDCIconToggle","linearProgress","MDCLinearProgress","radio","MDCRadio","snackbar","MDCSnackbar","tabs","MDCTab","MDCTabBar","textField","MDCTextField","menu","MDCSimpleMenu","select","MDCSelect","slider","MDCSlider","toolbar","MDCToolbar","browserLoad","dmc"],"mappings":"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","file":"django-material-registry.js","sourcesContent":["const registry = Object.create(null);\nconst CONSOLE_WARN = console.warn.bind(console);\nlet pageLoaded = false;\n\n\nfunction autoInit() {\n  window.addEventListener('turbolinks:load', onLoad);\n  window.addEventListener('turbolinks:before-render', onBeforeRender);\n  window.addEventListener('turbolinks:request-end', onRequestEnd);\n  initComponents();\n};\n\nfunction initComponents(root = document, warn = CONSOLE_WARN, allowUnknown=false) {\n  const nodes = root.querySelectorAll('[data-mdc-auto-init]');\n  for (let i = 0, node; (node = nodes[i]); i++) {\n    const ctorName = node.dataset.mdcAutoInit;\n    if (!ctorName) {\n      throw new Error('(mdc-auto-init) Constructor name must be given.');\n    }\n    const Ctor = registry[ctorName];\n    if (typeof Ctor !== 'function') {\n      if (!allowUnknown) {\n        throw new Error(\n          `(mdc-auto-init) Could not find constructor in registry for ${ctorName}`);\n      }\n      continue;\n    }\n    const component = Ctor.attachTo(node);\n    Object.defineProperty(node, ctorName, {\n      value: component,\n      writable: false,\n      enumerable: false,\n      configurable: true,\n    });\n  }\n}\n\nfunction register(ctorName, Ctor) {\n    if (typeof Ctor !== 'function') {\n      throw new Error(`(mdc-auto-init) Invalid Ctor value ${Ctor}. Expected function`);\n    }\n    if (registry[ctorName]) {\n      warn(\n        `(mdc-auto-init) Overriding registration for ${componentName} with ${Ctor}. ` +\n        `Was: ${registry[componentName]}`);\n    }\n    registry[ctorName] = Ctor;\n\n  if (pageLoaded) {\n    // an additional script loaded after turbolinks:load,\n    // components need to be initialized on the current page\n    const nodes = document.querySelectorAll(`body [data-mdc-auto-init=${ctorName}]`);\n    for (let i = 0, node; (node = nodes[i]); i++) {\n      if (node[ctorName]) {\n        console.warn(`(mdc-auto-init) Component already initialized for ${node}. Skipping...`);\n        continue;\n      }\n      const component = Ctor.attachTo(node);\n      Object.defineProperty(node, ctorName, {\n        value: component,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n      });\n    }\n  }\n};\n\nfunction onLoad() {\n  initComponents(document.querySelector('body'), CONSOLE_WARN, true);\n  pageLoaded = true;\n};\n\nfunction onBeforeRender() {\n  pageLoaded = false;\n  const nodes = document.querySelectorAll('body [data-mdc-auto-init]');\n  for (let i=0; i<nodes.length; i++) {\n    const node = nodes[i];\n    const ctorName = node.dataset.mdcAutoInit;\n    const component = node[ctorName];\n    component.destroy();\n  }\n};\n\nfunction onRequestEnd(event) {\n  if (event.data.xhr.status>=400) {\n    Turbolinks.controller.disable();\n  }\n};\n\nfunction destroy() {\n  window.removeEventListener('turbolinks:load', onLoad);\n  window.removeEventListener('turbolinks:before-render', onBeforeRender);\n  window.removeEventListener('turbolinks:request-end', onRequestEnd);\n}\n\n\nregister('MDCCheckbox', mdc.checkbox.MDCCheckbox);\nregister('MDCDialog', mdc.dialog.MDCDialog);\nregister('MDCPersistentDrawer', mdc.drawer.MDCPersistentDrawer);\nregister('MDCTemporaryDrawer', mdc.drawer.MDCTemporaryDrawer);\nregister('MDCFormField', mdc.formField.MDCFormField);\nregister('MDCRipple', mdc.ripple.MDCRipple);\nregister('MDCGridList', mdc.gridList.MDCGridList);\nregister('MDCIconToggle', mdc.iconToggle.MDCIconToggle);\nregister('MDCLinearProgress', mdc.linearProgress.MDCLinearProgress);\nregister('MDCRadio', mdc.radio.MDCRadio);\nregister('MDCSnackbar', mdc.snackbar.MDCSnackbar);\nregister('MDCTab', mdc.tabs.MDCTab);\nregister('MDCTabBar', mdc.tabs.MDCTabBar);\nregister('MDCTextField', mdc.textField.MDCTextField);\nregister('MDCSimpleMenu', mdc.menu.MDCSimpleMenu);\nregister('MDCSelect', mdc.select.MDCSelect);\nregister('MDCSlider', mdc.slider.MDCSlider);\nregister('MDCToolbar', mdc.toolbar.MDCToolbar);\n\n\nfunction browserLoad() {\n  autoInit();\n  window.removeEventListener('load', browserLoad);\n}\nwindow.addEventListener('load', browserLoad);\n\nwindow.dmc = {};\nwindow.dmc.autoInit = autoInit;\nwindow.dmc.register = register;\nwindow.dmc.destroy = destroy;\n"]}