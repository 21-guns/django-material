{"version":3,"sources":["django-material-registry.js"],"names":["autoInit","initComponents","register","destroy","mdc","registry","Object","create","CONSOLE_WARN","console","warn","bind","pageLoaded","window","addEventListener","onLoad","onBeforeRender","onRequestEnd","root","document","allowUnknown","nodes","querySelectorAll","i","node","ctorName","dataset","mdcAutoInit","Error","Ctor","component","attachTo","defineProperty","value","writable","enumerable","configurable","componentName","querySelector","length","event","data","xhr","status","controller","disable","removeEventListener","checkbox","MDCCheckbox","dialog","MDCDialog","drawer","MDCPersistentDrawer","MDCTemporaryDrawer","formField","MDCFormField","ripple","MDCRipple","gridList","MDCGridList","iconToggle","MDCIconToggle","linearProgress","MDCLinearProgress","radio","MDCRadio","snackbar","MDCSnackbar","tabs","MDCTab","MDCTabBar","textField","MDCTextField","menu","MDCSimpleMenu","select","MDCSelect","slider","MDCSlider","toolbar","MDCToolbar","browserLoad"],"mappings":"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","file":"django-material-registry.js","sourcesContent":["import * as mdc from 'material-components-web';\nimport Turbolinks from 'turbolinks';\n\nconst registry = Object.create(null);\nconst CONSOLE_WARN = console.warn.bind(console);\nlet pageLoaded = false;\n\nexport function autoInit() {\n  window.addEventListener('turbolinks:load', onLoad);\n  window.addEventListener('turbolinks:before-render', onBeforeRender);\n  window.addEventListener('turbolinks:request-end', onRequestEnd);\n  initComponents();\n};\n\nexport function initComponents(root = document, warn = CONSOLE_WARN, allowUnknown=false) {\n  const nodes = root.querySelectorAll('[data-mdc-auto-init]');\n  for (let i = 0, node; (node = nodes[i]); i++) {\n    const ctorName = node.dataset.mdcAutoInit;\n    if (!ctorName) {\n      throw new Error('(mdc-auto-init) Constructor name must be given.');\n    }\n    const Ctor = registry[ctorName];\n    if (typeof Ctor !== 'function') {\n      if (!allowUnknown) {\n        throw new Error(\n          `(mdc-auto-init) Could not find constructor in registry for ${ctorName}`);\n      }\n      continue;\n    }\n    const component = Ctor.attachTo(node);\n    Object.defineProperty(node, ctorName, {\n      value: component,\n      writable: false,\n      enumerable: false,\n      configurable: true,\n    });\n  }\n}\n\nexport function register(ctorName, Ctor) {\n    if (typeof Ctor !== 'function') {\n      throw new Error(`(mdc-auto-init) Invalid Ctor value ${Ctor}. Expected function`);\n    }\n    if (registry[ctorName]) {\n      warn(\n        `(mdc-auto-init) Overriding registration for ${componentName} with ${Ctor}. ` +\n        `Was: ${registry[componentName]}`);\n    }\n    registry[ctorName] = Ctor;\n\n  if (pageLoaded) {\n    // an additional script loaded after turbolinks:load,\n    // components need to be initialized on the current page\n    const nodes = document.querySelectorAll(`body [data-mdc-auto-init=${ctorName}]`);\n    for (let i = 0, node; (node = nodes[i]); i++) {\n      if (node[ctorName]) {\n        console.warn(`(mdc-auto-init) Component already initialized for ${node}. Skipping...`);\n        continue;\n      }\n      const component = Ctor.attachTo(node);\n      Object.defineProperty(node, ctorName, {\n        value: component,\n        writable: false,\n        enumerable: false,\n        configurable: true,\n      });\n    }\n  }\n};\n\nfunction onLoad() {\n  initComponents(document.querySelector('body'), CONSOLE_WARN, true);\n  pageLoaded = true;\n};\n\nfunction onBeforeRender() {\n  pageLoaded = false;\n  const nodes = document.querySelectorAll('body [data-mdc-auto-init]');\n  for (let i=0; i<nodes.length; i++) {\n    const node = nodes[i];\n    const ctorName = node.dataset.mdcAutoInit;\n    const component = node[ctorName];\n    component.destroy();\n  }\n};\n\nfunction onRequestEnd(event) {\n  if (event.data.xhr.status>=400) {\n    Turbolinks.controller.disable();\n  }\n};\n\nexport function destroy() {\n  window.removeEventListener('turbolinks:load', onLoad);\n  window.removeEventListener('turbolinks:before-render', onBeforeRender);\n  window.removeEventListener('turbolinks:request-end', onRequestEnd);\n}\n\n\nregister('MDCCheckbox', mdc.checkbox.MDCCheckbox);\nregister('MDCDialog', mdc.dialog.MDCDialog);\nregister('MDCPersistentDrawer', mdc.drawer.MDCPersistentDrawer);\nregister('MDCTemporaryDrawer', mdc.drawer.MDCTemporaryDrawer);\nregister('MDCFormField', mdc.formField.MDCFormField);\nregister('MDCRipple', mdc.ripple.MDCRipple);\nregister('MDCGridList', mdc.gridList.MDCGridList);\nregister('MDCIconToggle', mdc.iconToggle.MDCIconToggle);\nregister('MDCLinearProgress', mdc.linearProgress.MDCLinearProgress);\nregister('MDCRadio', mdc.radio.MDCRadio);\nregister('MDCSnackbar', mdc.snackbar.MDCSnackbar);\nregister('MDCTab', mdc.tabs.MDCTab);\nregister('MDCTabBar', mdc.tabs.MDCTabBar);\nregister('MDCTextField', mdc.textField.MDCTextField);\nregister('MDCSimpleMenu', mdc.menu.MDCSimpleMenu);\nregister('MDCSelect', mdc.select.MDCSelect);\nregister('MDCSlider', mdc.slider.MDCSlider);\nregister('MDCToolbar', mdc.toolbar.MDCToolbar);\n\n\nfunction browserLoad() {\n  autoInit();\n  window.removeEventListener('load', browserLoad);\n}\nwindow.addEventListener('load', browserLoad);\n"]}